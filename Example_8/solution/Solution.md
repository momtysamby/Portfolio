### Содержание
- [Введение](#введение)
- [Описание проблемы](#описание-проблемы)
- [Сущности сервиса сотрудников](#сущности-сервиса-сотрудников)
- [Доступные методы](#доступные-методы)

## Введение

Сервис сотрудников (далее - сервис) представляет собой WebAPI-приложение, которое позволяет работать с реквизитами сотрудников организации. Приложение хранит данные о пользователях. С помощью REST API запросов вы можете получить и редактировать данные, а также  обратиться к реквизитам сотрудников.

## Описание проблемы

Информация о сотрудниках нужна для указания в поле “Реквизиты плательщика”, которые необходимы для формирования отчета пользователя. У пользователя может быть несколько организаций, система не ограничивает их количество. Каждая организация хранит данные о своих сотрудниках. Если сотрудник относится к нескольким организациям, то его данные дублируются в каждой из них. 

Когда возникает необходимость изменить данные о таком сотруднике, то это необходимо делать во всех организациях. В противном случае возможны ошибки и проблемы с синхронизацией данных между различными сервисами. 

Для упрощения процесса данной задачи был разработан сервис. Он позволяет единовременно запросить, обновить или удалить данные о сотруднике их всех организаций. 

## Сущности сервиса сотрудников

Сервис оперирует данными о сотрудниках. Вся информация объединена сущностями, которые используются для формирования отчетов и СОПов. Все сущности уникальны для каждого пользователя и общие для всех его организаций. Доступные сущности приведены в таблице ниже:

<table style="width:100%">
  <tr>
    <th>Название</th>
    <th>описание</th>
  </tr>
  <tr>
    <td>Сотрудник (Person, Employee)</td>
    <td>
        <ul>
            <li>Данные о сотруднике:
                <ul>
                    <li><code>Guid</code> — guid сотрудника в системе;</li>
                    <li><code>FullName</code> — ФИО сотрудника;</li>
                    <li><code>InnFl</code> — ИНН сотрудника;</li>
                    <li><code>Gender</code> — пол сотрудника;</li>
                    <li><code>Citizenship</code> — гражданство сотрудника;</li>
                    <li><code>BirthDate</code> — дата рождения сотрудника;</li>
                    <li><code>BitrhPlace</code> — место рождения сотрудника</li>
                    <li><code>Phone</code> — личный телефон сотрудника;</li>
                    <li><code>Email</code> — электронная почта сотрудника;</li>
                    <li><code>RegistrationAddress</code> — адрес регистрации сотрудника;</li>
                    <li><code>IdentityCard</code> — данные удостоверяющего документа сотрудника (тип, серия, номер, кем выдан, когда выдан и код подразделения);</li>
                    <li><code>ForeignAddress</code> — фактический адрес проживания сотрудника.</li>
                </ul>
            </li>
            <li>Идентифицируется по <code>Guid</code>.</li>
            <li>Данные хранятся таблице в <code>employee.persons</code>.</li>
        </ul>
    </td>
  </tr>
  <tr>
    <td>Должность (Position)</td>
    <td>
        <ul>
            <li>Данные о сотруднике в конкретной организации (название должности).</li>
            <li>Один сотрудник может иметь только одну должность внутри одной организации.</li>
            <li>Данные хранятся в таблице employee.positions и доступны по связке ключ-значение:
                <ul>
                    <li>ключ: <code>guid1</code> сотрудника + <code>guid2</code> организации;</li>
                    <li>значение: документ, в котором есть строковое поле <code><i>string</i> Title</code> (название должности сотрудника с <code>guid1</code> в организации с <code>guid2</code>).</li>
                </ul>
            </li>
        </ul>
    </td>
  </tr>
    <tr>
    <td>Роль (Role)</td>
    <td>
        <ul>
            <li>Данные о выполняемой функции сотрудника в организации. Возможные значения:
                    <ul>
                        <li>руководитель;</li>
                        <li>главный бухгалтер;</li>
                        <li>уполномоченный представитель (отправитель);</li>
                        <li>индивидуальный предприниматель. </li>
                </ul>
            </li>
            <li>Данные хранятся в таблице employee.roles и доступны по связке ключ-значение:
                <ul>
                    <li>ключ: <code>guid2</code> организации + тип роли;</li>
                    <li>значение: документ, в котором есть 2 поля:
                        <ul>
                            <li><code>Person</code> - <code>guid1</code> сотрудника с ролью в организации с <code>guid2</code>;</li>
                            <li><code>PositionOrganization</code> - <code>guid3</code> организации, в которой работает человек c <code>guid1</code>. Если сотрудник относится к нескольким организациям одновременно, то его <code>guid3</code> может совпадать с <code>guid2</code>. Например, есть организация с <code>guid3</code>, но при этом <code>guid2</code> - её дочка, в которой нужный сотрудник <code>guid1</code> c должностью "руководитель" в <code>guid3</code>.</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </td>
  </tr>
</table>

## Доступные методы

| Метод                                                 | Описание                                                                               |
|-------------------------------------------------------|----------------------------------------------------------------------------------------|
| [PUT AddPerson](/Example_8/solution/addPerson.md)     | Добавление сотрудника в систему. Идемпотентный метод                                   |
| PUT SavePerson                                        | Сохранение сотрудника с его Guid в системе с присвоением ему Guid. Идемпотентный метод |
| GET GetPerson                                         | Получение данных о сотруднике                                                          |
| GET GetPersons                                        | Получение сотрудников организации по заданным параметрам                               |
| DELETE DeletePerson                                   | Удаление сотрудника                                                                    |
| GET SearchPersons                                     | Поиск сотрудников организации по заданным параметрам                                   |
| PUT SavePosition                                      | Сохранение должности сотрудника                                                        |
| [GET GetPosition](/Example_8/solution/getPosition.md) | Получение должности сотрудника в организации                                           |
| PUT SaveRole                                          | Сохранение роли сотрудника                                                             |
| DELETE DeleteRole                                     | Удаление роли сотрудника в организации                                                 |
| DELETE DeleteRoles                                    | Удаление всех ролей сотрудника во всех его организациях                                |
| GET GetRole                                           | Получение роли сотрудника в организации                                                |
| [GET GetRoles](/Example_8/solution/getRoles.md)       | Получение всех ролей пользователя в организации                                        |
| GET GetPersonRoles                                    | Получение всех ролей пользователя                                                      |
